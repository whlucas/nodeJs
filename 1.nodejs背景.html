<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>

            第一个问题

            NodeJs 和 JavaScript有什么区别?

            用户端软件:
            浏览器:Html, Css, Js
            安卓:Java, Python, C++, C#
            IOS:Objective-C, C++
            WindowsPC: C, C++, VB

            服务端软件:
            Java, C++, NOdeJs, Python, Php, C

            什么是计算机语言?
            计算机与人类沟通的语言,计算机直接认识的语言

            什么是编程语言?
            Console.log("hello world");
            这条编程语言计算机不认识,我们也不认识,他要通过一个编译过程把这个编程语言变成计算机语言,计算机才能认识

            编译过程分为三个部分:
            词法分析, 语法分析, 语义分析

            什么是词法分析?
            识别关键字,标识符,分界符,运算符
            关键字: 就是系统上的保留字var if else function return break
            标识符: var a = 1;  变量a是标识符  function run () {} run也是标识符
            分界符: ; {} ()
            运算符: + - * / ^(异或)

            如果一个语言X和一个语言Y拥有相同的词法分析,那么语言X和语言Y是同一种语言吗?
            不是

            什么是语法分析?
            把我的代码转化为命令语句或者短语.也就是简化为一个精简的命令

            如果一个语言X和一个语言Y拥有相同的语法分析,那么X和Y是同一种语言吗?
            NodeJs 和 JavaScript用的是同一种词法分析和语法分析,但语义分析不同,如果规定词法分析和语法分析相同就是同一种语言的话,那么javaScript和NodeJs就是同一种语言

            什么是语义分析
            语义分析能够生成计算机操作系统能够执行的程序.
            我们的程序是作用在操作系统上,但是服务器是linux操作系统,但我们的客户端有的是Windows,有的是安卓,有的是IOS,这几个系统的接口是不一样的,语义分析之后调用的操作系统的接口是不一样的.
            所以我javascript如果在前端生成的是window能够执行的命令,如果javascript如果在后端,在服务器端,在NodeJs上面运行生成的命令就是linux系统能够是别的命令,他们的语义分析是不同的

            所以说javaScript和NodeJs如果说相不相同,的看他的定位在哪,如果词法分析和语法分析相同就算相同的话那就是一种语言了



            NodeJs出现的背景

            图灵: 计算机科学之父, 人工智能之父
            福诺依曼: 计算机的创始人

            浏览器大战

            (1) 世界上第一个普遍使用并且可以展示图片的浏览器是什么?
            NCSA Mosaic 它诞生自伊利诺伊大学 NCSA是一个组织,他在1993年发表的浏览器 作者-万维网之父:蒂姆伯纳斯-李
            这个浏览器在user-Agent里面写的是NCSA_Mosaic/2.0(Windows 3.1)

            这个作者和另外几个人成立了一家Mosaic公司
            但是这个浏览器不是这个作者的,是NCSA组织的,这个组织把这个浏览器卖给了另外一家公司,于是这个Mosaic公司就自己又写了一个 Mosaic Netscape 0.9 的测试版本

            但是买了Mosaic这个版权的人不乐意了,不能用这个mosaic这个名字,所以这个公司就把公司的名字改成了Netscape Communication Corporation (网井通信公司)

            他的这个浏览器在user Agent里面写的是Mozilla
            这个名字有两种说法: 一种是 Mosaic + killer  第二种是 Mosaic Godzilla (哥斯拉)

            这个mozilla迅速的火起来了,占领了大部分的市场,但是就膨胀了,说微软的windows是没有调试过的硬件驱动程序
            然后微软很生气,自己开发了一个浏览器就是IE,但是开发出来了由于当时mozilla很火,很多公司都会给这个mozilla浏览器漂亮的页面,其他的浏览器就都是文字的页面,所以这个IE就很郁闷,他也想拿到好看的页面

            所以这个IE就在这个user-Agent里面谎称自己是mozilla,并且和windows捆绑销售,因为windows的界面更容易被不懂计算机的人所接受,所以windows火起来了,带动着IE也火起来了

            然后微软就开始膨胀了就开始恶心了

            然后Netscape就带着mozilla5.0重生了,并且开发了一个非常优秀的渲染引擎叫Gecko,然后大家就又都看是用mozilla了,又不用IE了

            用linux操作系统的人就很不开心,linux操作系统上面有一个非常出名的浏览器叫做Konqueror 他的渲染引擎叫KHTML这个引擎非常的出色,但是因为不是Gecko而得不到好的画面,最初是因为user-Agent不同而给出来不同的画面
            所以Konqueror为了把自己伪装成Gecko,在user-Agent里面写自己死like gecko

            Opera诞生: 他可以让用户自己定义user-Agent,就彻底乱了

            Chrome诞生: 他最开始用webkit作为渲染引擎,他也开始伪装,因为他也想得到好的页面
            他出名是因为他有一个非常突出的v8js引擎


            NodeJs的诞生
            NodeJs 为什么选择了Js和V8?
            NodeJs 的创始人Ryan Dahl 他觉得用c++ c这种汇编语言写web服务非常的麻烦,他就想用高级语言代替,要求高性能,异步IO,事件驱动,最后选择的了JS.

            NodeJs是不是单线程的?
            不是
            我们能够感知到的是单线程的,但是他整个运行的体系是多线程的



            为什么要用NodeJs?
            四点1, 2, 3, 4

            开始的时候前端和后端通过网络连接
            随着互联网发展,后端分成了web层, 服务层, 持久层
            web层,很多个人来请求,要求做到高性能,高并发
            服务层,复杂的业务逻辑
            持久层,庞大的数据吞吐量

            这个时候后端就忙不过来了,就出现了另外一个职业叫做运维

            但是这个时候还是忙不过来,需要进行重新的结构性的思考

            出现了全后端分离(全站ajax),开始的时候前端的代码放在服务器下,服务器既要部署前端代码又要部署后端代码,不管是前端改代码还是后端改代码都需要服务器来操作,而且二者相互影响

            但是这样后端的业务还是太多了

            催生了一次对整体架构的思考,过去我们分4层,展示层(前端)->Web层->服务层->持久层
            之后我们修改了,所有用户能够接触的到的给他归一到交互层,即把展示层和Web层合并成了一个交互层,他和业务逻辑不相关

            1. 我们需要一个语言:他需要高性能,支持异步IO或者说非阻塞IO,

            非阻塞IO:
            就是我们在执行主线程的时候还要可以进行其他的线程

            java比c或者c++要高级,这个高级高在不用处理垃圾变量,比如我定义一个a,这个a用完了不用手动的释放,因为java虚拟机会有一个垃圾回收机制帮我去释放已经用过的变量
            nodeJs也有一个垃圾处理机制把我不用的变量全都回收掉
            java在开线程之后,每一个线程池要自己管理,自己维护,nodeJs的线程池是弄的js帮我去维护的,所以多线程不用自己来维护
            2. 所以nodeJs是多线程的,并且线程池由nodeJs管理

            3. v8引擎的诞生
            4. 学习成本低

            全站工程师都需要会什么?
            取决于一个企业的系统架构都有什么

            当一个服务器的访问量增大时,需要考虑两个点,一个是数据安全性,一个是数据访问性能
            所以就需要两台机器,一台做服务,一台做数据库,通过服务访问数据库
            一个互联网公司的技术瓶颈往往出现在数据库的访问量上,一台虚拟机的数据库每秒能抗的QPS是10000左右,每秒能抗的QPS写在1500-2000左右
            所以就需要不止一个服务器来做数据库,Master作为主库,其他的数据库作为从库Slave,主库只负责写,写了之后把数据同步到从库,从库负责读,一般有一个主库,多个从库

            这个时候有一个请求我是往主库上面打还是往从库上面打,需要一个数据库的中间键,中间键决定我这个请求是往主库上面打还是往从库上面打,中间键存在于服务器和数据库中间

            再随着业务的发展,我的数据库多了,但是我的服务器运算力不够了,就需要有多个服务器了,这个时候浏览器想要发送一个请求是打给哪一个服务器呢,浏览器决定不了,浏览器打出去的东西只能问DNS,DNS给他一个IP,这个时候在浏览器和服务器的中间有一个反向代理服务器,他不处理业务逻辑,所以他能支持很高的请求量,他来决定往哪个服务器上面打
            主要有两个策略,一个是轮询(先打第一个,再打第二个,轮着来)还有一个是IP哈希最后一段IP除以三取余(假设只有三个服务器)余几就打在哪个服务器上面

            当我的数据量再大了,我需要提高性能,就需要加缓存,缓存加载服务和中间键的中间,有很多数据我是需要的,但是数据库再快他也没缓存快,有的请求在访问数据库之前先访问一下缓存,看看缓存有没有,缓存有就从缓存里拿

            因为每一个服务器的功能是不一样的,需要一个发布机给服务器发布东西
            我们本机(开发机)开发了代码发布到GitHub上面或者是公司自己的git上面然后发布机从GitHub上面拉取代码,然后发布到服务器上面,然后重启


            所以一个全站工程师
            (1) 前端语言
            (2) 后端语言
            (3) 网络知识
            (4) 持久化: 缓存+数据库
            (5) 全站无止境


            装环境的时候 prosy:512M
                       Service 1G
                       cache 2G
                       Database 1G
                       Release 2G

    </body>
</html>